<%- include('../partials/header', { title: 'Blog' }) %>

<div class="flex flex-col md:flex-row justify-between items-end mb-12">
    <div>
        <p class="text-brand-400 font-mono text-sm mb-2">/// TEKNİK GÜNLÜK</p>
        <h1 class="text-4xl font-extrabold text-white">Blog Yazıları</h1>
    </div>
    <% if (typeof user !== 'undefined' && user) { %>
    <a href="/blog/new" class="mt-4 md:mt-0 bg-blue-600 hover:bg-blue-500 text-white font-bold px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all flex items-center gap-2">
        <i class="fas fa-pen-nib"></i> Yeni Yazı Yaz
    </a>
    <% } %>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <% if (posts.length > 0) { %>
        <% posts.forEach(post => { %>
            <a href="/blog/<%= post._id %>" class="group bg-dark-800 border border-white/5 rounded-2xl overflow-hidden hover:border-blue-500/50 transition-all hover:shadow-[0_0_30px_rgba(59,130,246,0.1)] flex flex-col">
                <% if(post.imagePath) { %>
                    <div class="h-48 w-full relative overflow-hidden">
                        <img src="<%= post.imagePath %>" alt="<%= post.title %>" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                    </div>
                <% } %>
                
                <div class="p-8 flex flex-col flex-grow">
                    <div class="flex items-center gap-3 mb-4 text-sm text-gray-500">
                        <span class="flex items-center gap-1"><i class="far fa-calendar-alt"></i> <%= new Date(post.createdAt).toLocaleDateString('tr-TR') %></span>
                        <span>•</span>
                        <span class="flex items-center gap-1"><i class="far fa-user"></i> <%= post.createdBy.username %></span>
                    </div>

                    <h2 class="text-2xl font-bold text-white mb-3 group-hover:text-blue-400 transition-colors"><%= post.title %></h2>
                    <p class="text-gray-400 line-clamp-3 mb-6 flex-grow"><%= post.summary || post.content.substring(0, 120) %>...</p>
                    
                    <div class="flex items-center justify-between mt-auto">
                         <div class="flex flex-wrap gap-2">
                            <% if(post.tags && post.tags.length > 0) { %>
                                <% post.tags.slice(0,3).forEach(tag => { %>
                                    <span class="text-xs text-blue-400 bg-blue-500/10 px-2 py-1 rounded font-mono">#<%= tag %></span>
                                <% }) %>
                            <% } %>
                        </div>
                        <span class="text-blue-500 font-bold flex items-center gap-2 group-hover:translate-x-2 transition-transform">
                            Oku <i class="fas fa-arrow-right"></i>
                        </span>
                    </div>
                </div>
            </a>
        <% }) %>
    <% } else { %>
        <div class="col-span-full py-20 text-center border border-dashed border-gray-700 rounded-2xl bg-dark-800/50">
            <i class="fas fa-newspaper text-5xl text-gray-600 mb-4"></i>
            <p class="text-gray-400 text-lg">Henüz blog yazısı yayınlanmamış.</p>
        </div>
    <% } %>
</div>

<%- include('../partials/footer') %>